# 
# This configuration file enables the default "Welcome" page if there
# is no default index page present for the root URL.  To disable the
# Welcome page, comment out all the lines below. 
#
# NOTE: if this file is removed, it will be restored on upgrades.
#
<LocationMatch "^/+$">
    Options -Indexes
    ErrorDocument 403 /.noindex.html
</LocationMatch>

<Directory /usr/share/httpd/noindex>
    AllowOverride None
    Require all granted
</Directory>

<Directory /etc/nethserver>
    AllowOverride None
    Require all granted
</Directory>

{
    my $httpd = $DB->get('httpd') or return;
    my $home = $httpd->prop('HomePage') || '';

    if ($home eq '') {
        $home = 'nethserver';
    }
    $OUT .= "Alias /.noindex.html /usr/share/httpd/noindex/${home}/index.html\n";
    $OUT .= "Alias /res /usr/share/httpd/noindex/${home}/res";
}
Alias /css /usr/share/httpd/noindex/css
Alias /images /usr/share/httpd/noindex/images
Alias /pinned_apps.json /etc/nethserver/pinned_apps.json
